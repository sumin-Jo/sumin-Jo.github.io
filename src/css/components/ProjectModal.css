/* ---------- Backdrop ---------- */
.pm-backdrop {
    position: fixed;
    inset: 0;
    z-index: 90;
    background: color-mix(in oklab, #000 66%, transparent);
    -webkit-backdrop-filter: blur(10px) saturate(120%);
    backdrop-filter: blur(10px) saturate(120%);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 28px;
    animation: pm-fade .18s ease-out;
}

@keyframes pm-fade {
    from {
        opacity: 0
    }

    to {
        opacity: 1
    }
}

/* ---------- Dialog (compact) ---------- */
.pm-dialog {
    /* theme tokens */
    --brand: #5CA2FF;
    --ink: #e6e8ee;
    --muted: #a7afbf;
    --cardBg: color-mix(in oklab, #fff 5%, transparent);
    --cardBd: rgba(255, 255, 255, .09);

    width: min(880px, 94vw);
    max-height: min(82vh, 760px);
    background: color-mix(in oklab, rgba(255, 255, 255, .05) 92%, transparent);
    border: 1px solid rgba(255, 255, 255, .10);
    border-radius: 14px;
    overflow: clip;
    box-shadow: 0 14px 28px rgba(0, 0, 0, .28);
    transform: translateY(6px) scale(.99);
    animation: pm-pop .22s cubic-bezier(.2, .8, .25, 1) forwards;
}

@keyframes pm-pop {
    to {
        transform: translateY(0) scale(1)
    }
}

/* ---------- Header ---------- */
.pm-header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    padding: 14px 18px 8px
}

.pm-title {
    margin: 0;
    font-weight: 900;
    line-height: 1.25;
    font-size: clamp(1rem, .9rem + 1vw, 1.45rem);
    color: var(--ink)
}

.pm-title::after {
    content: "";
    display: block;
    width: 56px;
    height: 2px;
    margin-top: 8px;
    background: var(--brand);
    border-radius: 1px;
    opacity: .9
}

.pm-sub {
    margin: .35rem 0 0;
    color: var(--muted);
    font-size: .88rem
}

.pm-close {
    width: 38px;
    height: 38px;
    border-radius: 12px;
    display: grid;
    place-items: center;
    cursor: pointer;
    background: color-mix(in oklab, #fff 8%, transparent);
    color: var(--ink);
    border: 1px solid rgba(255, 255, 255, .12);
    transition: transform .15s ease, background .15s ease
}

.pm-close:hover {
    transform: translateY(-1px);
    background: color-mix(in oklab, #fff 12%, transparent)
}

/* ---------- Layout ---------- */
.pm-body {
    display: grid;
    grid-template-columns: 1.5fr .95fr;
    gap: 32px;
    padding: 14px 18px 18px;
    overflow: auto
}

@media (max-width:900px) {
    .pm-body {
        grid-template-columns: 1fr;
        gap: 14px
    }
}

/* ---------- Cards (left blocks & right panels) ---------- */
.pm-block,
.pm-panel {
    background: var(--cardBg);
    border: 1px solid var(--cardBd);
    border-radius: 10px;
    box-shadow: 0 6px 14px rgba(0, 0, 0, .14);
    padding: 12px 14px
}

.pm-block+.pm-block {
    margin-top: 10px
}

/* Section titles */
.pm-h4,
.pm-h5,
.pm-panel-title {
    margin: 0 0 8px;
    font-weight: 800;
    color: var(--ink);
    font-size: .95rem
}

.pm-h4::after,
.pm-h5::after {
    content: "";
    display: block;
    height: 1px;
    margin-top: 8px;
    background: color-mix(in oklab, var(--brand) 40%, transparent);
    opacity: .7
}

/* Typography */
.pm-block p {
    margin: 0;
    color: var(--ink);
    line-height: 1.6;
    font-size: .95rem;
    opacity: .96;
    word-break: keep-all
}

/* Chips */
.pm-chip-list {
    display: flex;
    flex-wrap: wrap;
    gap: 8px
}

.pm-chip {
    padding: 5px 10px;
    border-radius: 999px;
    font-size: .82rem;
    line-height: 1;
    color: var(--ink);
    background: color-mix(in oklab, #fff 8%, transparent);
    border: 1px solid rgba(150, 180, 220, .28);
    transition: background .15s ease, color .15s ease, border-color .15s ease, transform .1s ease
}

.pm-chip:hover {
    background: color-mix(in oklab, var(--brand) 25%, transparent);
    border-color: var(--brand);
    color: #fff;
    transform: translateY(-1px)
}

/* Buttons */
.pm-links {
    display: flex;
    gap: 8px;
    flex-wrap: wrap
}

.pm-btn {
    padding: 6px 12px;
    border-radius: 8px;
    font-size: .85rem;
    text-decoration: none;
    background: transparent;
    border: 1px solid color-mix(in oklab, var(--brand) 70%, #fff 0%);
    color: color-mix(in oklab, #ffffff 90%, var(--brand) 10%);
    transition: background .18s ease, color .18s ease, transform .12s ease
}

.pm-btn:hover {
    background: var(--brand);
    color: #fff;
    transform: translateY(-1px)
}

/* Hover elevation (subtle) */
.pm-block:hover,
.pm-panel:hover {
    box-shadow: 0 8px 18px rgba(0, 0, 0, .18)
}

/* ---------- Light mode ---------- */
body.light .pm-backdrop {
    background: color-mix(in oklab, #fff 66%, transparent);
    -webkit-backdrop-filter: blur(10px) saturate(120%);
    backdrop-filter: blur(10px) saturate(120%);
}
body.light .pm-dialog {
    --brand: #2563eb;
    --ink: #2b3040;
    --muted: #6b7280;
    --cardBg: color-mix(in oklab, #fff 95%, transparent);
    --cardBd: rgba(0, 0, 0, .08);
    background: color-mix(in oklab, #fff 80%, transparent);
    border-color: rgba(0, 0, 0, .12);
    box-shadow: 0 14px 28px rgba(0, 0, 0, .1);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    backdrop-filter: blur(20px) saturate(180%);
}
body.light .pm-title {
    color: var(--ink);
}
body.light .pm-title::before {
    content: "";
    display: block;
    width: 72px;
    height: 4px;
    border-radius: 2px;
    background: var(--brand);
    margin-bottom: 10px
}
body.light .pm-title::after {
    content: none
}
body.light .pm-sub {
    color: var(--muted)
}
body.light .pm-block,
body.light .pm-panel {
    background: var(--cardBg);
    border-color: var(--cardBd);
    box-shadow: 0 8px 16px rgba(0, 0, 0, .06);
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px);
}
body.light .pm-block h4,
body.light .pm-panel-title {
    color: var(--brand)
}
body.light .pm-chip {
    background: color-mix(in oklab, var(--brand) 5%, transparent);
    border-color: color-mix(in oklab, var(--brand) 20%, transparent);
    color: var(--ink);
}
body.light .pm-chip:hover {
    background: color-mix(in oklab, var(--brand) 12%, transparent);
    border-color: color-mix(in oklab, var(--brand) 40%, transparent);
    color: var(--brand);
    transform: translateY(-1px);
}
body.light .pm-btn {
    border-color: color-mix(in oklab, var(--brand) 60%, transparent);
    color: var(--brand);
}
body.light .pm-btn:hover {
    background: var(--brand);
    color: #fff
}
body.light .pm-close {
    background: color-mix(in oklab, #000 3%, transparent);
    border-color: rgba(0, 0, 0, .10);
    color: var(--ink);
}
body.light .pm-close:hover {
    background: color-mix(in oklab, var(--brand) 10%, transparent);
    border-color: color-mix(in oklab, var(--brand) 35%, transparent);
    transform: translateY(-1px);
}
/* ---------- Selection highlight ---------- */
.pm-dialog ::selection {
    background: #2563eb;
    color: #fff
}
body.light .pm-dialog ::selection {
    background: #2563eb;
    color: #fff
}

/* ---------- Reduced motion ---------- */
@media (prefers-reduced-motion:reduce) {
    .pm-dialog,
    .pm-backdrop {
        animation: none;
        transform: none
    }

    .pm-chip:hover {
        transform: none
    }
}

/* =======================================================
   Emphasis: 역할 블록만 살짝 하이라이트 (2번째 pm-block)
   - 좌측 얇은 포인트 바 + 은은한 바탕 톤 + 보더 강조
   ======================================================= */
.pm-main .pm-block:nth-of-type(2) {
    position: relative;
    border-color: color-mix(in oklab, var(--brand, #5CA2FF) 42%, #000 0%);
    background: linear-gradient(0deg, color-mix(in oklab, var(--brand, #5CA2FF) 10%, transparent), transparent) !important;
    box-shadow: 0 10px 20px rgba(0, 0, 0, .18);
}
.pm-main .pm-block:nth-of-type(2)::before {
    content: "";
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 3px;
    border-radius: 10px 0 0 10px;
    background: var(--brand, #5CA2FF);
    opacity: .95;
}
.pm-main .pm-block:nth-of-type(2) .pm-h4 {
    color: var(--brand, #5CA2FF);
}

/* 라이트 모드에서 역할 블록 대비 유지 */
body.light .pm-main .pm-block:nth-of-type(2) {
    border-color: color-mix(in oklab, var(--brand, #2563eb) 45%, transparent) !important;
    background: linear-gradient(0deg, color-mix(in oklab, var(--brand, #2563eb) 12%, #fff 88%), #fff) !important;
    box-shadow: 0 8px 16px rgba(0, 0, 0, .08);
}
body.light .pm-main .pm-block:nth-of-type(2)::before {
    background: var(--brand, #2563eb);
}

/* =======================================================
   Tech / Tools 패널: 선/칩 또렷하게 (깔끔한 라인 스타일)
   ======================================================= */

/* 패널 보더를 살짝 브랜드 톤으로 보강 */
.pm-panel {
    --panel-line: color-mix(in oklab, var(--brand, #5CA2FF) 30%, #fff 0%);
    border-color: var(--panel-line) !important;
}

.pm-panel + .pm-panel { margin-top: 16px; }

@media (max-width: 900px){
  .pm-panel + .pm-panel { margin-top: 14px; }
}

/* 섹션 제목 아래 얇은 구분선 */
.pm-panel .pm-h5 {
    padding-bottom: 6px;
    margin-bottom: 10px;
    border-bottom: 1px solid color-mix(in oklab, var(--brand, #5CA2FF) 28%, transparent);
}

/* 패널별 미세 차등(기술=조금 진하게, Tools=조금 부드럽게) */
.pm-panel.tech {
    border-color: color-mix(in oklab, var(--brand, #5CA2FF) 38%, #000 0%) !important;
}
.pm-panel.tools {
    border-color: color-mix(in oklab, var(--brand, #5CA2FF) 26%, #000 0%) !important;
}

/* 칩: 기본 라인 또렷 + 호버 시 컬러 채움 */
.pm-panel .pm-chip {
    border-color: color-mix(in oklab, var(--brand, #5CA2FF) 28%, #fff 0%) !important;
    background: color-mix(in oklab, #fff 7%, transparent) !important;
}
.pm-panel .pm-chip:hover {
    border-color: var(--brand, #5CA2FF) !important;
    background: color-mix(in oklab, var(--brand, #5CA2FF) 22%, transparent) !important;
    color: #fff !important;
}

/* 라이트 모드에서도 동일한 ‘깔끔한 라인’ 유지 */
body.light .pm-panel {
    border-color: color-mix(in oklab, var(--brand, #2563eb) 34%, #000 0%) !important;
}
body.light .pm-panel .pm-h5 {
    border-bottom-color: color-mix(in oklab, var(--brand, #2563eb) 30%, #000 0%);
}
body.light .pm-panel .pm-chip {
    border-color: color-mix(in oklab, var(--brand, #2563eb) 28%, transparent) !important;
    background: color-mix(in oklab, var(--brand) 4%, transparent) !important;
    color: var(--ink);
}
body.light .pm-panel .pm-chip:hover {
    background: color-mix(in oklab, var(--brand, #2563eb) 10%, transparent) !important;
    border-color: var(--brand, #2563eb) !important;
    color: var(--brand, #2563eb) !important;
}
